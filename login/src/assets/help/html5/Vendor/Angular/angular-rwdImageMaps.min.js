/*
* rwdImageMaps AngularJS Directive v1.0
*
* Allows image maps to be used in a responsive design by recalculating the area coordinates to match the actual image size on load and window.resize
* 
* Original Copyright (c) 2013 Matt Stow
* https://github.com/stowball/jQuery-rwdImageMaps
* http://mattstow.com
* Licensed under the MIT license
*
* angular-rwdImageMaps.js (by Philip Saa)
* https://github.com/cowglow/
* @cowglow
*/

angular.module("rwdImageMaps",[]).directive("rwdimgmap",function(g){return{restrict:"CA",link:function(m,a,k){a.bind("load",function(){var c=$(a).attr("width"),d=$(a).attr("height");angular.element(g).resize(function(){if(!c||!d){var b=new Image;b.src=$(a).attr("src");void 0==b.src&&(b.src=$(a).attr("ng-src"));c||(c=b.width);d||(d=b.height)}var g=$(a).width()/100,l=$(a).height()/100,b=k.usemap.replace("#",""),h=$(a).attr("data-imgsize");0==c&&(c=h.split("x")[0]);0==d&&(d=h.split("x")[1]);angular.element('map[name="'+
b+'"]').find("area").each(function(){var a=$(this);a.data("coords")||a.data("coords",a.attr("coords"));var b=a.data("coords").split(","),f=Array(b.length);console.log("before"+f+":::"+b);for(var e=0;e<f.length;++e)f[e]=0===e%2?parseInt(b[e]/c*100*g):parseInt(b[e]/d*100*l);a.attr("coords",f.toString())})}).trigger("resize")})}}});